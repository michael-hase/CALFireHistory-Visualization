<!DOCTYPE html>
<html>
<head>
    <title>Interactive Fire Data Visualization with Zoom and Pan</title>
    <script src="../DataVizFinalProject/D3/d3.v7.js"></script>
    <style>
        #map {
            width: 100%;
            height: 600px;
        }
        .feature {
            fill: orange;
            stroke: white;
            stroke-width: 1px;
        }
        .feature:hover {
            fill: red;
        }
        /* Add styles for your tooltip here */
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        var width = 960, height = 600;

        var svg = d3.select("#map").append("svg")
            .attr("width", width)
            .attr("height", height);

        var g = svg.append("g");

        var projection = d3.geoMercator()
            .scale(1300)
            .center([-120, 37])  // Center on California
            .translate([width / 2, height / 2]);

        var path = d3.geoPath().projection(projection);

        // Define zoom behavior
        var zoom = d3.zoom()
            .scaleExtent([1, 8])
            .on('zoom', () => {
                g.attr('transform', d3.event.transform);
            });

        // Apply the zoom behavior to the SVG
        svg.call(zoom);

        // Load and render the OpenStreetMap basemap using D3
        var tile = d3.tile()
            .size([width, height]);

        var image = g.selectAll("image")
            .data(tile)
            .enter().append("image")
            .attr("xlink:href", function (d) {
                return "https://a.tile.openstreetmap.org/" + d[2] + "/" + d[0] + "/" + d[1] + ".png";
            })
            .attr("x", function (d) {
                return d[0] * 256;
            })
            .attr("y", function (d) {
                return d[1] * 256;
            })
            .attr("width", 256)
            .attr("height", 256);

        d3.json("../DataVizFinalProject/data/calfire.geojson").then(function (ca) {
            g.selectAll(".feature")
                .data(ca.features)
                .enter().append("path")
                .attr("class", "feature")
                .attr("d", path)
                .on("mouseover", function (event, d) {
                    // Add interactivity, like showing a tooltip
                })
                .on("mouseout", function (event, d) {
                    // Hide tooltip or reverse any hover effects
                });
        });
    </script>
</body>
</html>
